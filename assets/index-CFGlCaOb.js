import{N as Z}from"./NavBar-DZGeI4u5.js";import{M as q}from"./MyTabbar-Czbfr-sw.js";import{p as C,c as L,m as J,a as Q,t as M,d as G,u as X,b as K,w as $,e as oo,f,g as F,n as D,h as no,_ as so,P as H,r as p,i as eo,j as to,k as lo,o as io,l as b,q as w,s as y,v as j,x as _,S as I,y as e,z as l,A as ao,B as ro,C as co}from"./index-Cv6Vz8a5.js";import{g as uo,a as mo,h as fo,b as vo,p as go}from"./api-B4Bpbcl4.js";import{_ as po}from"./one-CXrO1K9a.js";import"./use-placeholder-C8hS1JEN.js";function ho(n,s){const{days:v}=s;let{hours:o,minutes:u,seconds:a,milliseconds:r}=s;if(n.includes("DD")?n=n.replace("DD",C(v)):o+=v*24,n.includes("HH")?n=n.replace("HH",C(o)):u+=o*60,n.includes("mm")?n=n.replace("mm",C(u)):a+=u*60,n.includes("ss")?n=n.replace("ss",C(a)):r+=a*1e3,n.includes("S")){const c=C(r,3);n.includes("SSS")?n=n.replace("SSS",c):n.includes("SS")?n=n.replace("SS",c.slice(0,2)):n=n.replace("S",c.charAt(0))}return n}const[wo,_o]=L("count-down"),Co={time:J(0),format:Q("HH:mm:ss"),autoStart:M,millisecond:Boolean};var bo=G({name:wo,props:Co,emits:["change","finish"],setup(n,{emit:s,slots:v}){const{start:o,pause:u,reset:a,current:r}=X({time:+n.time,millisecond:n.millisecond,onChange:h=>s("change",h),onFinish:()=>s("finish")}),c=K(()=>ho(n.format,r.value)),d=()=>{a(+n.time),n.autoStart&&o()};return $(()=>n.time,d,{immediate:!0}),oo({start:o,pause:u,reset:d}),()=>f("div",{role:"timer",class:_o()},[v.default?v.default(r.value):c.value])}});const R=F(bo),[So,T]=L("progress"),yo={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:M,pivotColor:String,trackColor:String,strokeWidth:D,percentage:{type:D,default:0,validator:n=>+n>=0&&+n<=100}};var ko=G({name:So,props:yo,setup(n){const s=K(()=>n.inactive?void 0:n.color),v=()=>{const{textColor:o,pivotText:u,pivotColor:a,percentage:r}=n,c=u??`${r}%`;if(n.showPivot&&c){const d={color:o,left:`${+r}%`,transform:`translate(-${+r}%,-50%)`,background:a||s.value};return f("span",{style:d,class:T("pivot",{inactive:n.inactive})},[c])}};return()=>{const{trackColor:o,percentage:u,strokeWidth:a}=n,r={background:o,height:no(a)},c={width:`${u}%`,background:s.value};return f("div",{class:T(),style:r},[f("span",{class:T("portion",{inactive:n.inactive}),style:c},null),v()])}}});const V=F(ko),To=""+new URL("icon5-ByR6CkOw.png",import.meta.url).href,Po=""+new URL("icon7-BRWn4_Px.png",import.meta.url).href,No=""+new URL("egg-CvBl--JO.png",import.meta.url).href,Uo=""+new URL("../imgs/hand.png",import.meta.url).href,Bo=""+new URL("super-D-gdSZbi.png",import.meta.url).href,xo=""+new URL("times-CYYbz3ww.png",import.meta.url).href,Do={components:{NavbarVue:Z,MyTabbarVue:q,[H.name]:H,[V.name]:V,[R.name]:R},setup(){let n=p(!1),s=p(!1),v=p(!1),o=p(!1);const u=eo(),a=p(!1),r=p(0),c=localStorage.token;let d=["app:superhatch:amount","app:hatchnum:amount","app:hatchnum:num","app:ton:address"];const h=p({}),g=p({}),t=p(0),P=p(0),[N]=to(),{locale:U}=lo();async function k(){try{const i=await mo(),m=await fo();console.log(i),i.code==200&&(h.value=i.data),m.code==200&&(t.value=m.data?m.data.remainingSecond:0,P.value=m.data?m.data.totalSecond:1,a.value=m.data!=null,B())}catch(i){console.error("失败:",i)}}io(()=>{c&&(k(),O()),B()});function B(){t.value==0&&a.value&&(o.value=!0,setTimeout(()=>{o.value=!1},950))}async function O(){const i=await uo(d);i.code==200&&(g.value=i.data)}function W(){Number(h.value.hatchTodayNum)+Number(h.value.hatchPerpetualNum)>0?n.value=!0:ao(U.value=="en"?"Currently, there are no incubation attempts available":"当前暂无孵化次数")}function A(i){u.push(i)}async function E(){n.value=!1,(await vo()).code==200&&(k(),h.value.superHatch==1?(o.value=!0,setTimeout(()=>{o.value=!1},950)):a.value=!0)}async function z(i){s.value=!1,v.value=!1;let m=i==1?g.value[d[1]]*1e9:g.value[d[0]]*1e9;console.log(g.value[d[3]],m.toString());const x={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:g.value[d[3]],amount:m.toString()}]};console.log(x,N);try{const S=await N.sendTransaction(x);Y(i),console.log(111111,S)}catch(S){console.log(S,typeof S)}}async function Y(i){const m=await go({type:i});m.code==200&&(ro(m.msg),k())}return{showCenter:n,showSuper:s,showTimes:v,showGif:o,jumpto:A,inProgress:a,active:r,locale:U,onConfirm:E,userInfo:h,config:g,configKey:d,remainingSecond:t,toHatch:W,toBuy:z,totalSecond:P}}},Ho={class:"page"},jo={class:"iconWrap"},Io={class:"flex-bw"},Ro={class:"flex1"},Vo=["src"],Lo=["src"],Mo={class:"flex1"},Go=["src"],Ko=["src"],Fo=["src"],Oo={class:"flex-bw btns"},Wo={class:"flex"},Ao={class:"fs-16"},Eo={class:"flex"},zo={class:"fs-16"},Yo=["src"],Zo={class:"wrap flex1"},qo={class:"income flex"},Jo={class:"yellow"},Qo={key:0,class:"flex buttons"},Xo={key:1,class:"flex progress"},$o={class:"van_progress"},on={class:"countdown flex"},nn={class:"modal flex1"},sn={class:"flex"},en={class:"modal modal1 flex1"},tn={class:"flex1"},ln={class:"flex"},an={class:"modal modal1 flex1"},rn={class:"flex1"},cn={class:"flex"},un={key:0,class:"gif",src:po,alt:""};function dn(n,s,v,o,u,a){const r=b("NavbarVue"),c=b("MyTabbarVue"),d=b("van-progress"),h=b("van-count-down"),g=b("van-popup");return w(),y("div",Ho,[(w(),j(I,null,{default:_(()=>[f(r)]),_:1})),(w(),j(I,null,{default:_(()=>[f(c,{active:o.active},null,8,["active"])]),_:1})),e("div",jo,[e("div",Io,[e("div",Ro,[e("img",{class:"icons",onClick:s[0]||(s[0]=t=>o.jumpto("/synthesis")),src:"/public/imgs/icon"+(o.locale=="en"?11:1)+".png",alt:""},null,8,Vo),e("img",{class:"icons",onClick:s[1]||(s[1]=t=>o.jumpto("/myPet")),src:"/public/imgs/icon"+(o.locale=="en"?33:3)+".png",alt:""},null,8,Lo),e("img",{class:"icons",onClick:s[2]||(s[2]=t=>o.jumpto("/kong")),src:To,alt:""}),e("img",{class:"icons",onClick:s[3]||(s[3]=t=>o.jumpto("/ranking")),src:Po,alt:""})]),e("div",Mo,[e("img",{class:"icons",onClick:s[4]||(s[4]=t=>o.jumpto("/getHelp")),src:"/public/imgs/icon"+(o.locale=="en"?22:2)+".png",alt:""},null,8,Go),e("img",{class:"icons",onClick:s[5]||(s[5]=t=>o.jumpto("/invite")),src:"/public/imgs/icon"+(o.locale=="en"?44:4)+".png",alt:""},null,8,Ko),e("img",{class:"icons",onClick:s[6]||(s[6]=t=>o.jumpto("/airdrop")),src:"/public/imgs/icon"+(o.locale=="en"?66:6)+".png",alt:""},null,8,Fo)])]),e("div",Oo,[e("button",Wo,[e("span",null,l(n.$t("今日孵化"))+"：",1),e("span",Ao,l(o.userInfo.hatchTodayNum)+l(n.$t("次")),1)]),e("button",Eo,[e("span",null,l(n.$t("永久孵化"))+"：",1),e("span",zo,l(o.userInfo.hatchPerpetualNum)+l(n.$t("次")),1)])]),e("img",{onClick:s[7]||(s[7]=t=>o.showSuper=!0),class:"super",src:"/public/imgs/icon"+(o.locale=="en"?88:8)+".png",alt:""},null,8,Yo)]),e("div",Zo,[s[21]||(s[21]=e("img",{class:"egg",src:No,alt:""},null,-1)),e("div",qo,[e("span",null,l(n.$t("我的收益"))+"：",1),e("span",Jo,l(o.userInfo.earning)+"/h",1)]),o.inProgress?(w(),y("div",Xo,[e("span",null,l(n.$t("孵化进度")),1),e("div",$o,[f(d,{percentage:(1-o.remainingSecond/o.totalSecond)*100,color:"#F5BB30","show-pivot":!1,"track-color":"#413E5A"},null,8,["percentage"]),e("div",on,[f(h,{time:o.remainingSecond*1e3,format:"mm"+n.$t("分")+"ss"+n.$t("秒")},null,8,["time","format"])])]),e("img",{onClick:s[10]||(s[10]=t=>o.jumpto("/getHelp")),src:Uo,alt:""})])):(w(),y("div",Qo,[e("button",{onClick:s[8]||(s[8]=(...t)=>o.toHatch&&o.toHatch(...t))},l(n.$t("孵化")),1),e("button",{onClick:s[9]||(s[9]=t=>o.showTimes=!0)},l(n.$t("暴击孵化次数")),1)]))]),f(g,{show:o.showCenter,"onUpdate:show":s[13]||(s[13]=t=>o.showCenter=t),round:""},{default:_(()=>[e("div",nn,[e("div",null,l(n.$t("是否确认进行孵化操作"))+"？",1),e("div",sn,[e("button",{onClick:s[11]||(s[11]=t=>o.showCenter=!1)},l(n.$t("取消")),1),e("button",{onClick:s[12]||(s[12]=(...t)=>o.onConfirm&&o.onConfirm(...t))},l(n.$t("确定")),1)])])]),_:1},8,["show"]),f(g,{show:o.showSuper,"onUpdate:show":s[16]||(s[16]=t=>o.showSuper=t),round:""},{default:_(()=>[e("div",en,[e("div",tn,[s[22]||(s[22]=e("img",{src:Bo,alt:""},null,-1)),e("div",null,l(n.$t("您将使用TON购买（超级孵化器），购买后获得永久免除所有宠物蛋孵化时间权益",[o.config[o.configKey[0]]])),1)]),e("div",ln,[e("button",{onClick:s[14]||(s[14]=t=>o.showSuper=!1)},l(n.$t("取消")),1),e("button",{onClick:s[15]||(s[15]=t=>o.toBuy(2))},l(n.$t("购买")),1)])])]),_:1},8,["show"]),f(g,{show:o.showTimes,"onUpdate:show":s[19]||(s[19]=t=>o.showTimes=t),round:""},{default:_(()=>[e("div",an,[e("div",rn,[s[23]||(s[23]=e("img",{src:xo,alt:""},null,-1)),e("div",null,l(n.$t("您将使用TON购买（暴击孵化），购买后获得永久孵化次数次",[o.config[o.configKey[1]],o.config[o.configKey[2]]])),1)]),e("div",cn,[e("button",{onClick:s[17]||(s[17]=t=>o.showTimes=!1)},l(n.$t("取消")),1),e("button",{onClick:s[18]||(s[18]=t=>o.toBuy(1))},l(n.$t("购买")),1)])])]),_:1},8,["show"]),f(g,{show:o.showGif,"onUpdate:show":s[20]||(s[20]=t=>o.showGif=t),round:""},{default:_(()=>[o.showGif?(w(),y("img",un)):co("",!0)]),_:1},8,["show"])])}const wn=so(Do,[["render",dn],["__scopeId","data-v-1e0ff77a"]]);export{wn as default};
